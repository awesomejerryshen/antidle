<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AntIdle - 螞蟻放置遊戲">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <title>AntIdle - 螞蟻放置遊戲</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/tooltips.css">
</head>
<body>
    <!-- 遊戲容器 -->
    <div id="game-container">
        <!-- 頂部導航 -->
        <header id="game-header">
            <h1>🐜 AntIdle</h1>
            <nav id="game-nav">
                <button class="nav-btn active" data-tab="overview">總覽</button>
                <button class="nav-btn" data-tab="colony">蟻群</button>
                <button class="nav-btn" data-tab="upgrades">升級</button>
                <button class="nav-btn" data-tab="research">研究</button>
                <button class="nav-btn" data-tab="rebirth">重生</button>
                <button class="nav-btn" data-tab="achievements">成就</button>
                <button class="nav-btn" data-tab="settings">設定</button>
            </nav>
        </header>

        <!-- 主要內容區 -->
        <main id="game-main">
            <!-- 總覽頁面 -->
            <section id="tab-overview" class="tab-content active">
                <div id="weather-display" class="weather-info">
                    <span class="weather-icon" id="weather-icon">🌤️</span>
                    <span class="weather-text">天氣：<span id="weather-name">晴朗</span></span>
                </div>
                <div id="resource-display">
                    <div class="resource highlight">
                        <span class="resource-icon queen-icon">👑</span>
                        <span class="resource-label">蟻后</span>
                        <span class="resource-value" id="queen">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">🍯</span>
                        <span class="resource-label">食物</span>
                        <span class="resource-value" id="food">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">🍃</span>
                        <span class="resource-label">葉子</span>
                        <span class="resource-value" id="leaf">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon worker-icon">🐜</span>
                        <span class="resource-label">工蟻</span>
                        <span class="resource-value" id="workers">0</span>
                        <div class="worker-visual" id="workers-visual"></div>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">⚔️</span>
                        <span class="resource-label">兵蟻</span>
                        <span class="resource-value" id="soldiers">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">👶</span>
                        <span class="resource-label">護理蟻</span>
                        <span class="resource-value" id="nurses">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">🥚</span>
                        <span class="resource-label">幼蟲</span>
                        <span class="resource-value" id="larvae">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">💧</span>
                        <span class="resource-label">水滴</span>
                        <span class="resource-value" id="water">0</span>
                    </div>
                    <div class="resource">
                        <span class="resource-icon">🍪</span>
                        <span class="resource-label">昆蟲</span>
                        <span class="resource-value" id="insect">0</span>
                    </div>
                </div>

                <div id="stats-display">
                    <h3>統計資料</h3>
                    <div class="stat-row">
                        <span class="stat-label">遊戲時間：</span>
                        <span class="stat-value" id="game-time">00:00:00</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">總獲得食物：</span>
                        <span class="stat-value" id="total-food">0</span>
                    </div>
                </div>

                <div id="actions-container">
                    <h3>動作</h3>
                    <button id="collect-btn" class="action-btn primary">🍃 收集葉子</button>
                    <button id="buy-worker-btn" class="action-btn">🐜 購買工蟻 (<span id="worker-price">10</span> 🍯)</button>
                    <button id="buy-soldier-btn" class="action-btn">⚔️ 孵化兵蟻 (<span id="soldier-price">5</span> 🥚)</button>
                    <button id="buy-nurse-btn" class="action-btn">👶 購買護理蟻 (<span id="nurse-price">15</span> 🍯)</button>
                    <p class="hint-text">💡 提示：按住 Shift 點擊「收集葉子」可批量購買 10 隻工蟻</p>
                </div>
            </section>

            <!-- 蟻群頁面 -->
            <section id="tab-colony" class="tab-content">
                <h2>蟻群管理</h2>
                <div id="colony-info">
                    <div class="colony-stats">
                        <div class="stat-card">
                            <span class="stat-icon">🐜</span>
                            <span class="stat-label">總螞蟻數量</span>
                            <span class="stat-value" id="total-ants">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">⚔️</span>
                            <span class="stat-label">防禦力</span>
                            <span class="stat-value" id="total-defense">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">📈</span>
                            <span class="stat-label">生產效率</span>
                            <span class="stat-value" id="production-efficiency">100%</span>
                        </div>
                    </div>

                    <div class="ant-types">
                        <div class="ant-type">
                            <div class="ant-type-header">
                                <span class="ant-type-icon">👑</span>
                                <h3>蟻后</h3>
                                <span class="ant-type-count" id="queen-count">0</span>
                            </div>
                            <div class="ant-type-info">
                                <p>❤️ 健康值：<span id="queen-health">100</span>%</p>
                                <p>🥚 產卵率：<span id="queen-egg-rate">0</span> 幼蟲/秒</p>
                                <p>📈 生產加成：<span id="queen-bonus">0</span>%</p>
                                <p class="ant-type-description">蟻群的核心，持續產卵並提高所有螞蟻的生產效率。健康值影響產卵速度，需要護理蟻維護。</p>
                                <button id="feed-queen-btn" class="action-btn" style="margin-top: 10px; width: 100%;">
                                    🥚 餵食蟻后 (<span id="feed-queen-cost">5</span> 幼蟲 → +10 健康)
                                </button>
                            </div>
                        </div>

                        <div class="ant-type">
                            <div class="ant-type-header">
                                <span class="ant-type-icon">🐜</span>
                                <h3>工蟻</h3>
                                <span class="ant-type-count" id="workers-count">0</span>
                            </div>
                            <div class="ant-type-info">
                                <p>🍃 收集率：<span id="workers-collect-rate">0</span> 葉子/秒</p>
                                <p>🍯 轉換率：<span id="workers-conversion-rate">0</span> 葉子/秒</p>
                                <p class="ant-type-description">自動收集葉子並轉換為食物，是蟻群的主要生產力。</p>
                            </div>
                        </div>

                        <div class="ant-type">
                            <div class="ant-type-header">
                                <span class="ant-type-icon">⚔️</span>
                                <h3>兵蟻</h3>
                                <span class="ant-type-count" id="soldiers-count">0</span>
                            </div>
                            <div class="ant-type-info">
                                <p>🛡️ 防禦力：<span id="soldiers-defense">0</span></p>
                                <p>🎯 防禦成功率：<span id="soldiers-success-rate">0</span>%</p>
                                <p class="ant-type-description">保護蟻群免受外來昆蟲入侵，防禦成功可獲得獎勵。</p>
                            </div>
                        </div>

                        <div class="ant-type">
                            <div class="ant-type-header">
                                <span class="ant-type-icon">👶</span>
                                <h3>護理蟻</h3>
                                <span class="ant-type-count" id="nurses-count">0</span>
                            </div>
                            <div class="ant-type-info">
                                <p>🥚 照顧效率：<span id="nurses-efficiency">0</span> 幼蟲/秒</p>
                                <p>💡 總幼蟲產生：<span id="total-larvae-rate">0</span> 幼蟲/秒</p>
                                <p class="ant-type-description">照顧幼蟲，提高整體幼蟲產生速率。</p>
                            </div>
                        </div>
                    </div>

                    <div class="invasion-status">
                        <h3>防禦狀態</h3>
                        <div class="status-indicator">
                            <span class="status-icon" id="invasion-status-icon">🛡️</span>
                            <span class="status-text" id="invasion-status-text">蟻群安全</span>
                        </div>
                        <p>上一次入侵：<span id="last-invasion-time">無</span></p>
                    </div>
                </div>
            </section>

            <!-- 升級頁面 -->
            <section id="tab-upgrades" class="tab-content">
                <h2>升級商店</h2>
                <div class="room-upgrades">
                    <!-- 儲藏室 -->
                    <div class="room-card">
                        <div class="room-header">
                            <span class="room-icon">🏠</span>
                            <h3>儲藏室</h3>
                            <span class="room-level" id="storage-level">0</span>
                        </div>
                        <div class="room-info">
                            <p>🍯 食物儲存上限：<span id="storage-capacity">0</span></p>
                            <p>📊 使用量：<span id="storage-usage">0%</span></p>
                            <p>📈 每級增加：+<span id="storage-bonus">50</span> 食物上限</p>
                        </div>
                        <div class="room-action">
                            <button id="storage-upgrade-btn" class="action-btn">🏠 升級儲藏室 (<span id="storage-price">50</span> 🍯)</button>
                        </div>
                    </div>

                    <!-- 育兒室 -->
                    <div class="room-card">
                        <div class="room-header">
                            <span class="room-icon">🥚</span>
                            <h3>育兒室</h3>
                            <span class="room-level" id="nursery-level">0</span>
                        </div>
                        <div class="room-info">
                            <p>⚡ 孵化速度加成：<span id="nursery-bonus">+0</span> 幼蟲/秒</p>
                            <p>🥚 總產卵率：<span id="nursery-total-rate">0</span> 幼蟲/秒</p>
                            <p>📈 每級增加：+0.2 幼蟲/秒</p>
                        </div>
                        <div class="room-action">
                            <button id="nursery-upgrade-btn" class="action-btn">🥚 升級育兒室 (<span id="nursery-price">30</span> 🍯)</button>
                        </div>
                    </div>

                    <!-- 真菌農場 -->
                    <div class="room-card">
                        <div class="room-header">
                            <span class="room-icon">🍄</span>
                            <h3>真菌農場</h3>
                            <span class="room-level" id="fungus-level">0</span>
                        </div>
                        <div class="room-info">
                            <p>🍯 高級食物生產：<span id="fungus-production">0</span> 食物/秒</p>
                            <p>💧 水滴消耗：<span id="fungus-consumption">0</span> 水滴/秒</p>
                            <p>📈 每級增加：+0.5 食物/秒，+0.1 水滴/秒</p>
                        </div>
                        <div class="room-action">
                            <button id="fungus-upgrade-btn" class="action-btn">🍄 升級真菌農場 (<span id="fungus-price">80</span> 🍯)</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 研究頁面 -->
            <section id="tab-research" class="tab-content">
                <h2>科學研究系統 🔬</h2>
                
                <div class="research-header">
                    <div class="research-stats">
                        <div class="stat-card">
                            <span class="stat-icon">🔬</span>
                            <span class="stat-label">研究點數</span>
                            <span class="stat-value" id="research-points">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">📊</span>
                            <span class="stat-label">總獲得點數</span>
                            <span class="stat-value" id="total-research-points">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">✅</span>
                            <span class="stat-label">已解鎖研究</span>
                            <span class="stat-value" id="research-progress">0/0</span>
                        </div>
                    </div>

                    <div class="current-research" id="current-research-box" style="display: none;">
                        <h3>⏳ 當前研究</h3>
                        <div class="research-info">
                            <span id="current-research-name">-</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="research-progress-bar" style="width: 0%"></div>
                            </div>
                            <span id="research-time-remaining">-</span>
                        </div>
                        <button id="cancel-research-btn" class="action-btn danger">取消研究</button>
                    </div>
                </div>

                <div class="research-tree" id="research-tree">
                    <!-- 動態生成 -->
                </div>

                <div class="research-bonuses">
                    <h3>當前研究加成</h3>
                    <div id="research-bonuses-list">
                        <!-- 動態生成 -->
                    </div>
                </div>
            </section>

            <!-- 重生頁面 -->
            <section id="tab-rebirth" class="tab-content">
                <h2>重生系統 ♻️</h2>
                
                <div class="rebirth-info">
                    <div class="rebirth-stats">
                        <div class="stat-card">
                            <span class="stat-icon">🌟</span>
                            <span class="stat-label">重生點數</span>
                            <span class="stat-value" id="rebirth-points">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">📊</span>
                            <span class="stat-label">總獲得點數</span>
                            <span class="stat-value" id="total-rebirth-points">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">🔄</span>
                            <span class="stat-label">重生次數</span>
                            <span class="stat-value" id="rebirth-count">0</span>
                        </div>
                    </div>

                    <div class="rebirth-preview">
                        <h3>重生預覽</h3>
                        <div class="preview-item">
                            <span>本次可獲得：</span>
                            <span class="preview-value" id="preview-points">0 點</span>
                        </div>
                        <div class="preview-item">
                            <span>重生後將重置：</span>
                            <span class="preview-value">資源、螞蟻、房間</span>
                        </div>
                        <div class="preview-item">
                            <span>重生後將保留：</span>
                            <span class="preview-value">成就、重生點數、永久升級</span>
                        </div>
                        <button id="rebirth-btn" class="action-btn danger" disabled>
                            ♻️ 執行重生（需要遊戲時間 5 分鐘）
                        </button>
                    </div>
                </div>

                <div class="rebirth-upgrades">
                    <h3>永久升級商店</h3>
                    <div id="rebirth-upgrades-list">
                        <!-- 動態生成 -->
                    </div>
                </div>

                <div class="rebirth-bonuses">
                    <h3>當前永久加成</h3>
                    <div id="rebirth-bonuses-list">
                        <!-- 動態生成 -->
                    </div>
                </div>

                <div class="rebirth-tips">
                    <h3>💡 重生提示</h3>
                    <ul>
                        <li>重生會重置遊戲進度，但獲得重生點數</li>
                        <li>重生點數用於購買永久升級</li>
                        <li>永久升級在所有遊戲中都有效</li>
                        <li>建議在遊戲進度停滯時重生</li>
                        <li>重生後會獲得初始資源加成（如有購買）</li>
                    </ul>
                </div>
            </section>

            <!-- 成就頁面 -->
            <section id="tab-achievements" class="tab-content">
                <h2>成就系統 <span id="achievements-stats">0 / 21</span></h2>
                <div id="achievements-list">
                    <p class="no-achievements">尚未解鎖任何成就，繼續努力！</p>
                </div>
            </section>

            <!-- 設定頁面 -->
            <section id="tab-settings" class="tab-content">
                <h2>遊戲設定</h2>
                <div id="settings-container">
                    <div class="setting-group">
                        <h3>音效設定</h3>
                        <div class="setting-row">
                            <label class="setting-label">音效開關</label>
                            <input type="checkbox" id="setting-audio-enabled" checked>
                        </div>
                        <div class="setting-row">
                            <label class="setting-label">主音量</label>
                            <input type="range" id="setting-master-volume" min="0" max="100" value="30">
                            <span id="master-volume-display">30%</span>
                        </div>
                        <div class="setting-row">
                            <label class="setting-label">音效音量</label>
                            <input type="range" id="setting-sfx-volume" min="0" max="100" value="50">
                            <span id="sfx-volume-display">50%</span>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>遊戲設定</h3>
                        <div class="setting-row">
                            <label class="setting-label">自動儲存</label>
                            <input type="checkbox" id="setting-autosave" checked>
                        </div>
                        <div class="setting-row">
                            <label class="setting-label">儲存間隔（秒）</label>
                            <input type="number" id="setting-save-interval" value="30" min="10" max="300">
                        </div>
                        <div class="setting-row">
                            <label class="setting-label">深色模式</label>
                            <button id="dark-mode-btn" class="action-btn">🌙 切換深色模式</button>
                        </div>
                    </div>
                    
                    <button id="save-btn" class="action-btn">💾 手動儲存</button>
                    <button id="reset-btn" class="action-btn danger">🔄 重置遊戲</button>
                </div>
            </section>
        </main>

        <!-- 通知區域 -->
        <div id="notifications"></div>
    </div>

    <!-- 載入順序：變數 → 配置 → 工具函數 → 效果 → 音效 → 工具提示 → 重生 → 研究 → 遊戲核心 -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/tooltips.js"></script>
    <script src="js/rebirth.js"></script>
    <script src="js/research.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
