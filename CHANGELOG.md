# AntIdle - 變更日誌

本專案遵循 [語義化版本](https://semver.org/lang/zh-TW/)。

## [1.4.0] - 2026-02-23

### 存檔管理 💾
- **新增**：存檔匯出功能
  - 匯出為 JSON 檔案（antidle-save-YYYY-MM-DD.json）
  - 包含遊戲狀態、重生資料、研究資料
  - 顯示最後備份時間
- **新增**：存檔匯入功能
  - 驗證存檔格式和版本相容性
  - 匯入前顯示覆蓋確認對話框
  - 匯入後自動儲存並更新 UI
- **新增**：設定頁面「存檔管理」區塊

### 測試 🧪
- **新增**：單元測試框架（Playwright）
- **新增**：tests/unit/calculations.test.js
  - 工蟻價格公式測試
  - 房間升級價格測試
  - 存檔驗證測試
- **新增**：package.json 和 playwright.config.js

## [1.3.0] - 2026-02-20

### 技術優化 🔧
#### 程式碼模組化
- **重構**：game.js（2112行）拆分為 5 個模組
  - `game-resources.js` - 資源管理（257 行）
  - `game-rooms.js` - 房間系統（167 行）
  - `game-weather.js` - 天氣系統（56 行）
  - `game-invasion.js` - 入侵事件（52 行）
  - `game-core.js` - 核心邏輯（1313 行）
- **改進**：總代碼量減少 515 行

#### 效能優化
- **改進**：遊戲循環改用 `requestAnimationFrame`（取代 setInterval）
- **新增**：UI 更新節流
  - 資源數字：每 100ms 更新
  - 按鈕狀態：每 500ms 更新

## [1.2.0] - 2026-02-17

### 技術優化 🔧
#### 程式碼模組化
- **重構**：game.js（2112行）拆分為 5 個模組
  - `game-resources.js` - 資源管理（257 行）
  - `game-rooms.js` - 房間系統（167 行）
  - `game-weather.js` - 天氣系統（56 行）
  - `game-invasion.js` - 入侵事件（52 行）
  - `game-core.js` - 核心邏輯（1313 行）
- **改進**：總代碼量減少 267 行（移除重複代碼）

#### 效能優化
- **改進**：遊戲循環改用 `requestAnimationFrame`（取代 setInterval）
- **新增**：UI 更新節流
  - 資源數字：每 100ms 更新
  - 按鈕狀態：每 500ms 更新
- **改進**：批次 DOM 更新（使用 DocumentFragment）

## [0.11.0] - 2026-02-17

### Bug 修復 🔧
- **修復**：`createAchievementEffect` 函數未定義錯誤
- **修復**：遊戲循環停止問題
- **修復**：語言選擇器元素缺失

### 文件更新 📝
- **更新**：ROADMAP.md - 階段六標記為已完成
- **更新**：多語言支援（中英文）已完整實作
- **更新**：統計面板已實作（成就、研究統計）

## [0.10.0] - 2026-02-16

### 科學研究系統 🔬
#### 研究點數系統
- **新增**：每 30 秒自動獲得 1 研究點數
- **新增**：研究點數統計（當前、總獲得）
- **新增**：研究進度追蹤

#### 技術樹（20 個研究項目）
- **新增**：生產技術類（4 項）
  - 高級農業、葉子處理、水源保護、育種技術
- **新增**：螞蟻進化類（4 項）
  - 工蟻效率、兵蟻力量、護理蟻專業、蟻后基因強化
- **新增**：建築工程類（4 項）
  - 房間優化、儲存升級、育兒室擴建、高級房間技術
- **新增**：防禦系統類（4 項）
  - 防禦訓練、天氣防護、警報系統、堡壘建設
- **新增**：自動化類（3 項）
  - 自動收集、自動餵食、效率全面提升
- **新增**：特殊能力類（3 項）
  - 暴擊能力、超級暴擊、終極協同效應

#### 研究加成（16 種效果）
- **新增**：生產加成（食物、葉子、水滴、幼蟲）
- **新增**：螞蟻效率（工蟻、兵蟻、護理蟻、蟻后）
- **新增**：房間效率（儲存、育兒、真菌）
- **新增**：防禦能力（入侵防禦、天氣抗性）
- **新增**：自動功能（自動收集、自動餵食）
- **新增**：特殊能力（暴擊機率）

#### UI 改進
- **新增**：研究頁籤（統計、進度、樹狀結構）
- **新增**：研究進度條顯示
- **新增**：研究加成面板
- **新增**：動態研究樹（按類別分組）

## [0.9.0] - 2026-02-16

### 重生系統 ♻️
#### 重生點數
- **新增**：基於總食物計算（每 1000 = 1 點）
- **新增**：基於遊戲時間計算（每 10 分鐘 = 1 點）
- **新增**：基於成就計算（每個 = 5 點）
- **新增**：基於螞蟻數量計算（每 10 隻 = 1 點）
- **新增**：基於房間等級計算（每級 = 2 點）

#### 永久升級商店（6 種升級）
- **新增**：生產加速 I & II（+10%、+25% 生產效率）
- **新增**：交易優惠 I & II（-5%、-10% 價格）
- **新增**：擴充倉庫（+50 食物容量）
- **新增**：蟻后強化（+20 最大健康值）
- **新增**：起始資源（重生後獲得額外資源）

#### 重生功能
- **新增**：重生預覽（顯示可獲得點數）
- **新增**：重生條件檢查（最少 5 分鐘遊戲時間）
- **新增**：重生重置（保留成就和重生點數）
- **新增**：初始資源加成（如有購買）

#### UI 改進
- **新增**：重生頁籤（統計、預覽、升級、加成）
- **新增**：重生點數顯示
- **新增**：永久升級商店 UI
- **新增**：當前加成顯示面板

### Bug 修復
- **修復**：天氣通知樣式（新增 info 類型樣式）
- **修復**：深色模式功能（新增 body.dark-theme 變數覆蓋）
- **改進**：成就系統（顯示所有成就，包括未解鎖的）
- **修復**：成就列表初始化（確保啟動時正確顯示）

## [0.8.0] - 2026-02-16

### 遊戲平衡優化 🎮
#### 水滴平衡
- **新增**：工蟻產生水滴（0.02/秒）
- **調整**：真菌農場消耗降低（0.1 → 0.08/秒）
- **調整**：真菌農場產出提升（0.5 → 0.6/秒）
- **效果**：真菌農場閒置率從 >50% 降至 <20%

#### 幼蟲平衡
- **調整**：蟻后產卵率降低（0.1 → 0.08/秒）
- **調整**：護理蟻效率降低（0.1 → 0.08/秒）
- **新增**：幼蟲可餵食蟻后恢復健康（5 幼蟲 = 10 健康）
- **新增**：蟻群頁面「餵食蟻后」按鈕
- **效果**：幼蟲累積速度降低 20%，增加消耗途徑

#### 價格優化
- **調整**：兵蟻價格倍率降低（1.3 → 1.25）
- **調整**：護理蟻價格倍率降低（1.4 → 1.35）
- **效果**：後期價格降低 25-33%

#### 文件
- **新增**：BALANCE_ANALYSIS.md（完整平衡分析報告）

## [0.7.0] - 2026-02-15

### 音效系統 🔊
- **新增**：Web Audio API 音效系統
- **新增**：點擊、收集、購買、升級音效
- **新增**：成就、天氣、入侵警報音效
- **新增**：音量控制（主音量、音效音量）
- **新增**：音效開關

### 響應式設計 📱
- **新增**：平板優化（max-width: 1024px）
- **新增**：手機優化（max-width: 768px）
- **新增**：小型手機優化（max-width: 480px）
- **新增**：橫向模式支援
- **新增**：列印樣式優化

### 工具提示系統 💡
- **新增**：Hover 顯示詳細說明
- **新增**：資源、房間、天氣說明
- **新增**：手機點擊支援
- **新增**：深色模式適配

### UI 改進
- **新增**：設定頁面音效控制區塊
- **新增**：音量滑桿控制
- **改進**：手機使用體驗

## [0.6.0] - 2026-02-15

### 視覺和體驗優化 ✨
#### 螞蟻動畫
- **新增**：背景隨機移動的工蟻和兵蟻
- **新增**：工蟻搬葉子、兵蟻帶劍視覺差異

#### 粒子效果
- **新增**：資源收集爆發特效
- **新增**：購買成功粒子效果
- **新增**：升級成功閃光效果

#### 天氣視覺化
- **新增**：下雨效果（雨滴動畫）
- **新增**：陽光效果（光芒脈動）
- **新增**：暴風效果（風粒子）

#### UI 優化
- **新增**：深色/淺色主題切換
- **新增**：按鈕波紋效果
- **新增**：資源跳動動畫
- **新增**：升級閃光提示

#### 技術改進
- **新增**：effects.js 模組
- **新增**：animations.css 樣式檔
- **整合**：視覺效果到遊戲流程

## [0.5.0] - 2026-02-15

### 事件和成就系統 ✅
#### 天氣事件
- **新增**：雨天（水滴增加，葉子減少）
- **新增**：陽光（葉子增加，食物消耗增加）
- **新增**：暴風（資源損失風險）

#### 入侵事件
- **新增**：隨機外來昆蟲入侵
- **新增**：兵蟻防禦判定
- **新增**：戰鬥結果計算
- **新增**：防禦成功獎勵

#### 成就系統
- **新增**：21 個成就（幼蟲、工蟻、兵蟻、護理蟻、蟻后、食物、房間、時間、入侵）
- **新增**：成就自動檢測
- **新增**：成就解鎖通知
- **新增**：成就頁面 UI

## [0.4.0] - 2026-02-15

### 蟻巢房間系統 🏠
- **新增**：儲藏室（增加食物儲存上限）
- **新增**：育兒室（加速幼蟲孵化）
- **新增**：真菌農場（用水滴產出食物）
- **新增**：房間升級系統
- **新增**：升級頁面 UI

## [0.3.0] - 2026-02-15

### 螞蟻類型系統 🐜
#### 兵蟻系統
- **新增**：用幼蟲孵化兵蟻
- **新增**：隨機入侵事件
- **新增**：兵蟻防禦機制
- **新增**：防禦成功獎勵

#### 護理蟻系統
- **新增**：照顧幼蟲，提高孵化速度
- **新增**：維護蟻后健康
- **新增**：護理蟻購買功能

#### 蟻后系統
- **新增**：定期產卵（獲得幼蟲）
- **新增**：提高所有螞蟻生產效率
- **新增**：蟻后健康系統

## [0.1.0] - 2026-02-12

### 初始版本 🎉
- **新增**：基本放置遊戲框架
- **新增**：資源系統（食物、葉子、水滴、幼蟲、昆蟲）
- **新增**：工蟻購買和自動生產
- **新增**：點擊收集機制
- **新增**：LocalStorage 存檔系統
- **新增**：自動儲存功能
- **新增**：分頁導航系統
- **新增**：遊戲設定介面
- **新增**：通知系統
- **新增**：響應式設計
- **新增**：深色模式支援（系統設定）

### 技術細節
- 純前端實作（無需後端）
- 模組化 JavaScript 架構
- CSS 變數系統
- Git 版本控制

---

## 未來計劃

### 階段七：雲端功能（待開發）
- Firebase 雲端儲存
- 多設備同步
- 存檔匯入/匯出

### 技術優化
- TypeScript 類型檢查
- 單元測試覆蓋
- 效能優化（大量螞蟻渲染）

詳見 [ROADMAP.md](ROADMAP.md)
